{{ define "main" }}
<!-- Main Content -->
<main class="main-content">
    <div class="container">
        <!-- Top News Section -->
        <section class="top-news-section mb-4">
            <div class="row">
                <!-- Main Article -->
                <div class="col-lg-8">
                    {{ $mainArticle := index (where .Site.RegularPages ".Section" "automotive") 0 }}
                    {{ if $mainArticle }}
                    <article class="main-article">
                        <div class="article-image">
                            {{ if $mainArticle.Params.images }}
                            <img src="{{ index $mainArticle.Params.images 0 }}" alt="{{ $mainArticle.Title }}" class="img-fluid" loading="lazy">
                            {{ else }}
                            <div class="no-image-main">
                                <i class="fas fa-car"></i>
                                <span>{{ $mainArticle.Title }}</span>
                            </div>
                            {{ end }}
                        </div>
                        <div class="article-content">
                            <span class="article-category">속보</span>
                            <h1 class="article-title">
                                <a href="{{ $mainArticle.Permalink }}">{{ $mainArticle.Title }}</a>
                            </h1>
                            <p class="article-summary">{{ $mainArticle.Summary | truncate 200 }}</p>
                        </div>
                    </article>
                    {{ end }}
                </div>
                
                <!-- Side Articles -->
                <div class="col-lg-4">
                    <div class="side-articles">
                        {{ range first 4 (after 1 (where .Site.RegularPages ".Section" "automotive")) }}
                        <article class="side-article">
                            <div class="row">
                                <div class="col-4">
                                    <div class="article-thumb">
                                        {{ if .Params.images }}
                                        <img src="{{ index .Params.images 0 }}" alt="{{ .Title }}" class="img-fluid" loading="lazy">
                                        {{ else }}
                                        <div class="no-image-thumb">
                                            <i class="fas fa-car"></i>
                                        </div>
                                        {{ end }}
                                    </div>
                                </div>
                                <div class="col-8">
                                    <h3 class="article-title">
                                        <a href="{{ .Permalink }}">{{ .Title | truncate 50 }}</a>
                                    </h3>
                                    <p class="article-excerpt">{{ .Summary | truncate 80 }}</p>
                                </div>
                            </div>
                        </article>
                        {{ end }}
                    </div>
                </div>
            </div>
        </section>

        <!-- News Categories Tabs -->
        <section class="news-categories mb-4">
            <div class="category-tabs">
                <ul class="nav nav-tabs" id="categoryTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="latest-tab" data-bs-toggle="tab" data-bs-target="#latest" type="button" role="tab">최신뉴스</button>
                    </li>
                    {{ range .Site.Menus.main }}
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="{{ .Name }}-tab" data-bs-toggle="tab" data-bs-target="#{{ .Name }}" type="button" role="tab">{{ .Name }}</button>
                    </li>
                    {{ end }}
                </ul>
            </div>
            
            <div class="tab-content" id="categoryTabsContent">
                <!-- Latest News -->
                <div class="tab-pane fade show active" id="latest" role="tabpanel">
                    <div class="row">
                        {{ range first 6 .Site.RegularPages }}
                        <div class="col-lg-4 col-md-6 mb-3">
                            <article class="news-item">
                                <div class="news-thumb">
                                    {{ if .Params.images }}
                                    <img src="{{ index .Params.images 0 }}" alt="{{ .Title }}" class="img-fluid" loading="lazy">
                                    {{ else }}
                                    <div class="no-image-news">
                                        <i class="fas fa-{{ if eq .Section "automotive" }}car{{ else if eq .Section "economy" }}chart-line{{ else }}newspaper{{ end }}"></i>
                                    </div>
                                    {{ end }}
                                </div>
                                <div class="news-content">
                                    <span class="news-category">{{ .Section | title }}</span>
                                    <h4 class="news-title">
                                        <a href="{{ .Permalink }}">{{ .Title }}</a>
                                    </h4>
                                    <p class="news-excerpt">{{ .Summary | truncate 100 }}</p>
                                    <div class="news-meta">
                                        <span class="news-date">{{ .Date.Format "01월 02일" }}</span>
                                    </div>
                                </div>
                            </article>
                        </div>
                        {{ end }}
                    </div>
                </div>

                <!-- Category Tabs Content -->
                {{ range .Site.Menus.main }}
                <div class="tab-pane fade" id="{{ .Name }}" role="tabpanel">
                    <div class="row">
                        {{ $sectionName := strings.TrimPrefix "/" (strings.TrimSuffix "/" .URL) }}
                        {{ range first 6 (where $.Site.RegularPages ".Section" $sectionName) }}
                        <div class="col-lg-4 col-md-6 mb-3">
                            <article class="news-item">
                                <div class="news-thumb">
                                    {{ if .Params.images }}
                                    <img src="{{ index .Params.images 0 }}" alt="{{ .Title }}" class="img-fluid" loading="lazy">
                                    {{ else }}
                                    <div class="no-image-news">
                                        <i class="fas fa-{{ if eq .Section "automotive" }}car{{ else if eq .Section "economy" }}chart-line{{ else }}newspaper{{ end }}"></i>
                                    </div>
                                    {{ end }}
                                </div>
                                <div class="news-content">
                                    <span class="news-category">{{ .Section | title }}</span>
                                    <h4 class="news-title">
                                        <a href="{{ .Permalink }}">{{ .Title }}</a>
                                    </h4>
                                    <p class="news-excerpt">{{ .Summary | truncate 100 }}</p>
                                    <div class="news-meta">
                                        <span class="news-date">{{ .Date.Format "01월 02일" }}</span>
                                    </div>
                                </div>
                            </article>
                        </div>
                        {{ end }}
                    </div>
                </div>
                {{ end }}
            </div>
        </section>

        <!-- Additional News Grid -->
        <section class="additional-news">
            <div class="row">
                {{ range first 8 (after 7 .Site.RegularPages) }}
                <div class="col-lg-3 col-md-6 mb-4">
                    <article class="small-news-item">
                        <div class="small-news-thumb">
                            {{ if .Params.images }}
                            <img src="{{ index .Params.images 0 }}" alt="{{ .Title }}" class="img-fluid" loading="lazy">
                            {{ else }}
                            <div class="no-image-small">
                                <i class="fas fa-{{ if eq .Section "automotive" }}car{{ else if eq .Section "economy" }}chart-line{{ else }}newspaper{{ end }}"></i>
                            </div>
                            {{ end }}
                        </div>
                        <div class="small-news-content">
                            <h5 class="small-news-title">
                                <a href="{{ .Permalink }}">{{ .Title | truncate 60 }}</a>
                            </h5>
                            <div class="small-news-meta">
                                <span class="small-news-date">{{ .Date.Format "01월 02일" }}</span>
                            </div>
                        </div>
                    </article>
                </div>
                {{ end }}
            </div>
        </section>
    </div>
</main>
{{ end }}
