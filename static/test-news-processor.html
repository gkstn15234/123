<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iruinss 스타일 뉴스 처리 시스템 테스트</title>
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 40px;
            border: 1px solid #e9ecef;
            padding: 20px;
            border-radius: 8px;
        }
        .test-section h2 {
            color: #495057;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        button {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,123,255,0.3);
        }
        .result {
            background: #f8f9fa;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin-top: 15px;
            border-radius: 0 5px 5px 0;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 400px;
            overflow-y: auto;
        }
        .input-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #495057;
        }
        input, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
        }
        textarea {
            min-height: 80px;
            resize: vertical;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-weight: bold;
        }
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .sample-data {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🚀 iruinss 스타일 뉴스 처리 시스템 테스트</h1>
        
        <!-- 기본 기능 테스트 -->
        <div class="test-section">
            <h2>📊 1. 카테고리 자동 판별 테스트</h2>
            <div class="input-group">
                <label for="titleInput">제목:</label>
                <input type="text" id="titleInput" placeholder="예: 현대차 신차 출시" value="현대차 역대급 전기차 출시">
            </div>
            <div class="input-group">
                <label for="descInput">설명:</label>
                <textarea id="descInput" placeholder="예: 전기차 시장에서 혁신적인 변화">전기차 시장에 새로운 바람을 일으킬 혁신적인 신차가 출시됩니다.</textarea>
            </div>
            <button onclick="testCategoryDetection()">카테고리 판별하기</button>
            <div id="categoryResult" class="result" style="display:none;"></div>
        </div>

        <!-- SEO 슬러그 테스트 -->
        <div class="test-section">
            <h2>🔗 2. SEO 슬러그 생성 테스트</h2>
            <div class="input-group">
                <label for="slugInput">제목:</label>
                <input type="text" id="slugInput" placeholder="예: 현대차 역대급 실적 발표" value='"깜짝 실적 발표"…현대차 3분기 영업이익 2조 돌파'>
            </div>
            <button onclick="testSlugGeneration()">슬러그 생성하기</button>
            <div id="slugResult" class="result" style="display:none;"></div>
        </div>

        <!-- 전체 뉴스 처리 테스트 -->
        <div class="test-section">
            <h2>📰 3. 전체 뉴스 아이템 처리 테스트</h2>
            <div class="sample-data">
                <strong>샘플 데이터:</strong> 아래 버튼을 클릭하면 미리 준비된 뉴스 데이터를 iruinss 스타일로 변환합니다.
            </div>
            <button onclick="testFullNewsProcessing('economy')">경제 뉴스 처리 테스트</button>
            <button onclick="testFullNewsProcessing('automotive')">자동차 뉴스 처리 테스트</button>
            <div id="fullProcessResult" class="result" style="display:none;"></div>
        </div>

        <!-- 실시간 테스트 -->
        <div class="test-section">
            <h2>⚡ 4. 실시간 커스텀 뉴스 처리</h2>
            <div class="input-group">
                <label for="customTitle">제목:</label>
                <input type="text" id="customTitle" placeholder="뉴스 제목을 입력하세요" value="삼성전자 AI 반도체 개발 성공">
            </div>
            <div class="input-group">
                <label for="customDesc">설명:</label>
                <textarea id="customDesc" placeholder="뉴스 내용을 입력하세요">삼성전자가 차세대 AI 반도체 개발에 성공하여 글로벌 시장에서 경쟁 우위를 확보할 전망입니다.</textarea>
            </div>
            <div class="input-group">
                <label for="customSource">출처:</label>
                <input type="text" id="customSource" placeholder="출처를 입력하세요" value="IT조선">
            </div>
            <button onclick="testCustomNews()">커스텀 뉴스 처리하기</button>
            <div id="customResult" class="result" style="display:none;"></div>
        </div>
    </div>

    <!-- 스크립트 로드 -->
    <script src="/js/news-processor.js"></script>
    
    <script>
        // 카테고리 판별 테스트
        function testCategoryDetection() {
            const title = document.getElementById('titleInput').value;
            const desc = document.getElementById('descInput').value;
            
            try {
                const category = IruinssNewsProcessor.determineEconomyOrAutomotive(title, desc, '');
                const result = `
📋 입력 데이터:
제목: ${title}
설명: ${desc}

🎯 판별 결과:
카테고리: ${category}

💡 판별 근거:
- 제목과 설명을 분석하여 키워드 매칭
- 경제 관련 키워드 vs 자동차 관련 키워드 비교
- 더 많이 매칭된 카테고리로 분류
                `;
                
                showResult('categoryResult', result, 'success');
            } catch (error) {
                showResult('categoryResult', `❌ 오류 발생: ${error.message}`, 'error');
            }
        }

        // SEO 슬러그 생성 테스트  
        function testSlugGeneration() {
            const title = document.getElementById('slugInput').value;
            
            try {
                const slug = IruinssNewsProcessor.generateSEOSlug(title);
                const result = `
📋 입력 데이터:
원본 제목: ${title}

🔗 생성된 슬러그:
${slug}

💡 변환 과정:
1. 특수문자 및 따옴표 제거
2. 소문자 변환
3. 공백을 하이픈(-)으로 변경
4. 연속 하이픈 정리
                `;
                
                showResult('slugResult', result, 'success');
            } catch (error) {
                showResult('slugResult', `❌ 오류 발생: ${error.message}`, 'error');
            }
        }

        // 전체 뉴스 처리 테스트
        function testFullNewsProcessing(type) {
            const sampleData = {
                economy: {
                    title: "코스피 급등, 3000선 돌파 임박",
                    description: "국내 증시가 강세를 보이며 코스피가 3000선 돌파를 앞두고 있습니다.",
                    pubDate: "2025-06-30",
                    source: { name: "경제신문" }
                },
                automotive: {
                    title: "현대차 신형 아이오닉 7 출시",
                    description: "현대자동차가 새로운 전기차 아이오닉 7을 공개하며 전기차 시장 공략에 나섰습니다.",
                    pubDate: "2025-06-30", 
                    source: { name: "자동차매거진" }
                }
            };

            const newsItems = [{
                json: sampleData[type]
            }];

            try {
                const processed = IruinssNewsProcessor.processNewsItems(newsItems);
                const result = `
📋 샘플 데이터 (${type === 'economy' ? '경제' : '자동차'}):
제목: ${sampleData[type].title}
설명: ${sampleData[type].description}

🚀 생성된 iruinss 스타일 프롬프트:
${processed[0].json.prompt.substring(0, 800)}...

💡 포함된 요소:
- 감성적 제목 스타일 지침
- 구조화된 HTML 템플릿  
- 카테고리별 키워드
- SEO 최적화 요소
- 관련 기사 섹션
- SNS 공유 기능
                `;
                
                showResult('fullProcessResult', result, 'success');
            } catch (error) {
                showResult('fullProcessResult', `❌ 오류 발생: ${error.message}`, 'error');
            }
        }

        // 커스텀 뉴스 처리 테스트
        function testCustomNews() {
            const title = document.getElementById('customTitle').value;
            const desc = document.getElementById('customDesc').value;
            const source = document.getElementById('customSource').value;

            if (!title || !desc || !source) {
                showResult('customResult', '❌ 모든 필드를 입력해주세요.', 'error');
                return;
            }

            const newsItems = [{
                json: {
                    title: title,
                    description: desc,
                    pubDate: new Date().toISOString(),
                    source: { name: source }
                }
            }];

            try {
                const processed = IruinssNewsProcessor.processNewsItems(newsItems);
                const category = IruinssNewsProcessor.determineEconomyOrAutomotive(title, desc, '');
                const slug = IruinssNewsProcessor.generateSEOSlug(title);
                
                const result = `
📋 입력한 커스텀 데이터:
제목: ${title}
설명: ${desc}
출처: ${source}

🎯 자동 분석 결과:
카테고리: ${category}
SEO 슬러그: ${slug}

🚀 iruinss 스타일 변환 완료!
프롬프트 길이: ${processed[0].json.prompt.length}자

💡 생성된 요소들:
- 감성적 키워드 적용
- 구조화된 HTML 템플릿
- 이미지 플레이스홀더 (IMG_URL_1~4)
- 관련 기사 섹션
- SNS 공유 버튼
- 태그 시스템
- 구조화 데이터 (JSON-LD)

📝 첫 100자 미리보기:
${processed[0].json.prompt.substring(0, 200)}...
                `;
                
                showResult('customResult', result, 'success');
            } catch (error) {
                showResult('customResult', `❌ 오류 발생: ${error.message}`, 'error');
            }
        }

        // 결과 표시 헬퍼 함수
        function showResult(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.style.display = 'block';
            element.className = `result ${type}`;
        }

        // 페이지 로드 시 상태 확인
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof IruinssNewsProcessor === 'undefined') {
                document.body.innerHTML = `
                    <div class="container">
                        <h1>❌ 오류: IruinssNewsProcessor를 찾을 수 없습니다</h1>
                        <p>news-processor.js 파일이 올바르게 로드되지 않았습니다.</p>
                        <p>다음을 확인해주세요:</p>
                        <ul>
                            <li>static/js/news-processor.js 파일이 존재하는지</li>
                            <li>Hugo 서버가 실행 중인지</li>
                            <li>브라우저 콘솔에서 오류 메시지 확인</li>
                        </ul>
                    </div>
                `;
            } else {
                const statusDiv = document.createElement('div');
                statusDiv.className = 'status success';
                statusDiv.innerHTML = '✅ IruinssNewsProcessor가 성공적으로 로드되었습니다!';
                document.querySelector('.container').insertBefore(statusDiv, document.querySelector('.test-section'));
            }
        });
    </script>
</body>
</html> 